---
id: "031"
feature: "TUI Todo App"
status: "approved"
created: "2025-12-28"
---

# Specification: TUI Todo App

## Overview

A terminal-based todo manager that demonstrates the supertag-cli codegen feature. The app uses generated Effect Schema classes to provide type-safe access to Tana todo data, displays todos in a split-pane terminal UI, and allows creating new todos that are sent to Tana via the Input API.

This serves as both a practical tool and a reference implementation showing how to use Effect schemas generated from Tana supertags.

## User Scenarios

### Scenario 1: Browse Todos

**As a** developer using Tana for task management
**I want to** view my todos in a terminal interface
**So that** I can quickly check my tasks without leaving the command line

**Acceptance Criteria:**
- [ ] App displays a list of todos on the left side of the terminal
- [ ] Selecting a todo shows its details in the right pane
- [ ] Todo list shows title and completion status
- [ ] Details pane shows all todo fields (title, due date, status, etc.)
- [ ] Keyboard navigation works (up/down arrows, enter to select)

### Scenario 2: Create New Todo

**As a** developer using Tana for task management
**I want to** create a new todo from the terminal
**So that** I can quickly capture tasks without switching to the Tana app

**Acceptance Criteria:**
- [ ] Pressing a key (e.g., 'n') opens a creation form
- [ ] Form validates input using the generated Effect schema
- [ ] Invalid input shows clear error messages
- [ ] Submitting the form creates the todo in Tana via Input API
- [ ] New todo appears in the list after creation
- [ ] User can cancel creation and return to the list

### Scenario 3: Refresh Todo List

**As a** developer using Tana for task management
**I want to** refresh the todo list
**So that** I can see todos created in other applications

**Acceptance Criteria:**
- [ ] Pressing a key (e.g., 'r') refreshes the todo list
- [ ] Loading indicator shows during refresh
- [ ] List updates with any new or changed todos

### Scenario 4: View Help

**As a** new user of the TUI app
**I want to** see available keyboard shortcuts
**So that** I can learn how to use the application

**Acceptance Criteria:**
- [ ] Help bar at bottom shows common shortcuts
- [ ] Pressing '?' shows full help overlay
- [ ] Help overlay can be dismissed with any key

## Functional Requirements

### FR-1: Schema Generation Integration

The app must use Effect schemas generated by supertag-cli codegen command.

**Validation:** Running `supertag codegen generate -o ./src/schemas.ts --tags Todo` produces valid schemas that the app imports and uses.

### FR-2: Todo List Display

The app must display todos fetched from the supertag-cli database in a scrollable list.

**Validation:** List shows at least the todo title and a visual indicator of completion status. List scrolls when todos exceed visible area.

### FR-3: Todo Detail View

The app must display detailed information about the selected todo in a separate pane.

**Validation:** All fields from the generated Todo schema are displayed with appropriate formatting (dates formatted, booleans as checkboxes, etc.).

### FR-4: Todo Creation with Validation

The app must provide a form for creating new todos with schema-based validation.

**Validation:** Submitting invalid data (e.g., invalid date format) shows error message and prevents submission. Valid data passes schema validation.

### FR-5: Tana Input API Integration

The app must send new todos to Tana using the Input API.

**Validation:** After successful creation, the todo exists in Tana and can be found via `supertag search`.

### FR-6: Keyboard Navigation

The app must be fully navigable via keyboard.

**Validation:** All actions (select, create, refresh, quit) are accessible via documented keyboard shortcuts.

### FR-7: Error Handling

The app must gracefully handle errors (missing database, API failures, etc.).

**Validation:** Error messages are displayed in the UI. App does not crash on errors. User can retry or quit.

## Non-Functional Requirements

- **Performance:** List should render within 100ms. Navigation between items should feel instant.
- **Usability:** Keyboard shortcuts should be intuitive and documented. UI should be readable in standard terminal sizes (80x24 minimum).
- **Compatibility:** Must work in common terminals (iTerm2, Terminal.app, VS Code integrated terminal).
- **Dependencies:** Should use minimal dependencies beyond Effect and Ink.

## Key Entities

| Entity | Description | Key Attributes |
|--------|-------------|----------------|
| Todo | A task item from Tana | id, title, dueDate, completed, status, priority |
| AppState | Current application state | selectedIndex, todos, mode (list/create/help), error |

## Success Criteria

- [ ] App launches and displays todos from supertag-cli database
- [ ] Generated Effect schemas are used for Todo type definitions
- [ ] User can navigate the todo list with keyboard
- [ ] User can view details of any todo
- [ ] User can create a new todo that appears in Tana
- [ ] Schema validation catches invalid input before API call
- [ ] App handles errors gracefully without crashing
- [ ] App serves as a clear example of codegen usage

## Assumptions

- User has supertag-cli installed and has run `supertag sync index`
- User has a "Todo" or similar supertag defined in their Tana workspace
- User has `TANA_API_TOKEN` environment variable configured
- User's terminal supports basic ANSI colors and cursor movement

## [NEEDS CLARIFICATION]

- Which specific supertag name should we target (Todo, Task, TodoItem)?
  -> Todo
- Should the app support filtering/searching todos?
  -> yes
- Should completed todos be hidden or shown with strikethrough?
  -> with strikethrough  
- What Tana node should new todos be created under (daily note, specific project)?
  -> INBOX

## Out of Scope

- Editing existing todos (read + create only in v1)
- Deleting todos
- Drag-and-drop reordering
- Multiple supertag support (focus on single Todo type)
- Syncing changes back from Tana in real-time
- Mouse support (keyboard-only in v1)
